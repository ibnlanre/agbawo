/*!
 * Àgbáwo-1.0.0
 * (c) Ridwan Olanrewaju (2020) MIT
 */
!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(n="undefined"!=typeof globalThis?globalThis:n||self).Agbawo=t()}(this,(function(){"use strict";var n=function(n){return"object"!=typeof n||null===n||"function"==typeof n.toJSON||n instanceof String||n instanceof Number||n instanceof RegExp||n instanceof Date||n instanceof Boolean},t="~",e=function(n){return"string"==typeof n&&0===n.indexOf("~~")},r=function(n){return"string"==typeof n&&0===n.indexOf(t)&&!e(n)},o=function(n){return r(n)||e(n)?t+n:n},i=function(n){return n.slice(1)},f=function(n){return n.replace(/"/g,"").substring(4)},u=function(n){return(n.name?n.name+"=":"")+n.toString()};function c(n,t,e){return JSON.stringify(n,t||function(n,t){return t?n&&t instanceof RegExp?"_re_"+("/"+(e=t).source+"/"+(/\w+$/.exec(e)||"")):t instanceof Function?"_fn_"+u(t):"symbol"==typeof t?"_sm_"+t.toString():("Object"===t.constructor.name&&Reflect.ownKeys(t).forEach((function(n){"symbol"==typeof n&&(t["_sm_"+n.toString()]=t[n])})),t):t;var e},e)}function s(n,t,e){var r=Object.getPrototypeOf(n);Reflect.ownKeys(r).filter((function(n){return!(n in t)})).concat(Reflect.ownKeys(n)).forEach((function(r){return function(r){var o=Object.getOwnPropertyDescriptor(t,r);r in t&&!o.writable||(t[r]=Array.isArray(n[r])?n[r].map((function(n){return a(n,e)})):a(n[r],e))}(r)}))}function a(n,t){void 0===t&&(t=new Map);try{if(t.has(n))return t.get(n);if(!(n&&n instanceof Object))return n;var e=y(n);return s(n,e,t.set(n,e)),e}catch(t){return n}}var y=function(n){var t=n.constructor.name,e=global.Buffer&&Buffer.isBuffer(n),r=[n.buffer,n.byteOffset,n.length];return"ArrayBuffer"===t?n.slice():"Date"===t?(new Date).setTime(n.getTime()):"RegExp"===t?new RegExp(n.source,/\w+$/.exec(n)||""):"buffer"in n?(e?Buffer.from:new n.constructor).apply(void 0,r):n instanceof Function?new Function("return ("+u(n)+")")():new n.constructor},l=function(){function n(){this.keys=[],this.values=[]}return n.prototype.get=function(n){var t=this.keys.indexOf(n);return this.values[t]},n.prototype.has=function(n){return this.keys.indexOf(n)>=0},n.prototype.set=function(n,t){var e=this.keys.indexOf(n);return e>=0?this.values[e]=t:(this.keys.push(n),this.values.push(t)),this},n}();return{walker:function(n){return Reflect.ownKeys(Object.getPrototypeOf(n)).concat(Reflect.ownKeys(n)).reduce((function(t,e){return t[e]=n[e],t}),{})},clone:a,stringify:function(f,u,s){var a=function(e){var r=[],i=new l,f=function(e,u){var c=e;return n(e)||(i.has(e)?(i.get(e)instanceof Array&&(r.push(i.get(e)),i.set(e,String(t+(r.length-1)))),c=i.get(e)):(i.set(e,u),c=Reflect.ownKeys(e).reduce((function(n,t){return n[t]=f(e[t],u.concat(t)),n}),e instanceof Array?[]:{}))),"string"==typeof e&&(c=o(e)),c};return{legend:r,main:f(e,[])}}(f),y=c(a.legend),p=c(a.main,function(n){return"function"!=typeof n?n:function(t,f){return e(f)?o(n(t,i(f))):r(f)?f:n(t,f)}}(u),s);return void 0!==p?'{"legend":'+y+',"main":'+p+"}":p},parse:function(t,u){return c=function(n,t){var e=/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2}(?:\.\d*)?)Z$/;return JSON.parse(n,t||function(n,t){return"string"!=typeof t?t:t.match(e)?new Date(t):t.startsWith("_fn_")||t.startsWith("_re_")?new Function("return "+f(t))():t.startsWith("_sm_")?Symbol.for(""+/\((\w+)\)/.exec(f(t))[1]):t})}(t,function(n){return"function"!=typeof n?n:function(t,f){return e(f)?o(n(t,i(f))):r(f)?f:n(t,f)}}(u)),s=function(t,o,u){var a,y=t;return t&&"Object"===t.constructor.name&&Object.keys(t).forEach((function(n){"string"==typeof n&&n.startsWith("_sm_")&&((y=c.main)[Symbol.for(""+/\((\w+)\)/.exec(f(n))[1])]=t[n],delete y[n])})),n(t)||Reflect.ownKeys(t).forEach((function(n){return s(t[n],n,t)})),r(t)&&(y=c.main,a=Number(i(t)),c.legend[a].forEach((function(n){return y=y[n]}))),e(t)&&(y=i(t)),u&&(u[o]=y),y},"object"==typeof c&&null!==c&&void 0!==c.main&&void 0!==c.legend&&c.legend instanceof Array?s(c.main):c;var c,s}}}));
