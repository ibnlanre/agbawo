/*!
 * Àgbáwo-1.0.0
 * (c) Ridwan Olanrewaju (2020) MIT
 */
!function(n,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(n="undefined"!=typeof globalThis?globalThis:n||self).Agbawo=e()}(this,(function(){"use strict";var n=function(n){return"object"!=typeof n||null===n||"function"==typeof n.toJSON||n instanceof String||n instanceof Number||n instanceof RegExp||n instanceof Date||n instanceof Boolean},e="~",t=function(n){return"string"==typeof n&&0===n.indexOf("~~")},r=function(n){return"string"==typeof n&&0===n.indexOf(e)&&!t(n)},o=function(n){return r(n)||t(n)?e+n:n},i=function(n){return n.slice(1)},f=function(n){return n.replace(/"/g,"").substring(4)},u=function(n){return(n.name?n.name+"=":"")+n};function c(n,e,t){return JSON.stringify(n,e||function(n,e){return e?n&&e instanceof RegExp?"_re_"+("/"+(t=e).source+"/"+(/\w+$/.exec(t)||"")):e instanceof Function?"_fn_"+u(e):"symbol"==typeof e?"_sm_"+e.toString():("Object"===e.constructor.name&&Reflect.ownKeys(e).forEach((function(n){"symbol"==typeof n&&(e["_sm_"+n.toString()]=e[n])})),e):e;var t},t)}function s(n,e,t){var r=Object.getPrototypeOf(n);Reflect.ownKeys(r).filter((function(n){return!(n in e)})).concat(Reflect.ownKeys(n)).forEach((function(r){return function(r){var o=Object.getOwnPropertyDescriptor(e,r);r in e&&!o.writable||(e[r]=Array.isArray(n[r])?n[r].map((function(n){return a(n,t)})):a(n[r],t))}(r)}))}function a(n,e){void 0===e&&(e=new Map);try{if(e.has(n))return e.get(n);if(!(n&&n instanceof Object))return n;var t=y(n);return s(n,t,e.set(n,t)),t}catch(e){return n}}var y=function(n){var e=n.constructor.name,t=global.Buffer&&Buffer.isBuffer(n),r=[n.buffer,n.byteOffset,n.length];return"ArrayBuffer"===e?n.slice():"Date"===e?(new Date).setTime(n.getTime()):"RegExp"===e?new RegExp(n.source,/\w+$/.exec(n)||""):"buffer"in n?(t?Buffer.from:new n.constructor).apply(void 0,r):n instanceof Function?new Function("return ("+u(n)+")")():new n.constructor},l=function(){function n(){this.keys=[],this.values=[]}return n.prototype.get=function(n){var e=this.keys.indexOf(n);return this.values[e]},n.prototype.has=function(n){return this.keys.indexOf(n)>=0},n.prototype.set=function(n,e){var t=this.keys.indexOf(n);return t>=0?this.values[t]=e:(this.keys.push(n),this.values.push(e)),this},n}();return{walker:function(n){return Reflect.ownKeys(Object.getPrototypeOf(n)).concat(Reflect.ownKeys(n)).reduce((function(e,t){return e[t]=n[t],e}),{})},clone:a,stringify:function(f,u,s){var a=function(t){var r=[],i=new l,f=function(t,u){var c=t;return n(t)||(i.has(t)?(i.get(t)instanceof Array&&(r.push(i.get(t)),i.set(t,String(e+(r.length-1)))),c=i.get(t)):(i.set(t,u),c=Reflect.ownKeys(t).reduce((function(n,e){return n[e]=f(t[e],u.concat(e)),n}),t instanceof Array?[]:{}))),"string"==typeof t&&(c=o(t)),c};return{legend:r,main:f(t,[])}}(f),y=c(a.legend),p=c(a.main,function(n){return"function"!=typeof n?n:function(e,f){return t(f)?o(n(e,i(f))):r(f)?f:n(e,f)}}(u),s);return void 0!==p?'{"legend":'+y+',"main":'+p+"}":p},parse:function(e,u){return c=function(n,e){var t=/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2}(?:\.\d*)?)Z$/;return JSON.parse(n,e||function(n,e){return"string"!=typeof e?e:e.match(t)?new Date(e):e.startsWith("_fn_")||e.startsWith("_re_")?new Function("return "+f(e))():e.startsWith("_sm_")?Symbol.for(""+/\((\w+)\)/.exec(f(e))[1]):e})}(e,function(n){return"function"!=typeof n?n:function(e,f){return t(f)?o(n(e,i(f))):r(f)?f:n(e,f)}}(u)),s=function(e,o,u){var a,y=e;return e&&"Object"===e.constructor.name&&Object.keys(e).forEach((function(n){"string"==typeof n&&n.startsWith("_sm_")&&((y=c.main)[Symbol.for(""+/\((\w+)\)/.exec(f(n))[1])]=e[n],delete y[n])})),n(e)||Reflect.ownKeys(e).forEach((function(n){return s(e[n],n,e)})),r(e)&&(y=c.main,a=Number(i(e)),c.legend[a].forEach((function(n){return y=y[n]}))),t(e)&&(y=i(e)),u&&(u[o]=y),y},"object"==typeof c&&null!==c&&void 0!==c.main&&void 0!==c.legend&&c.legend instanceof Array?s(c.main):c;var c,s}}}));
